System.register("app",[],function(t){"use strict";return{execute:function(){function e(){}function n(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(n)}function l(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode&&t.parentNode.removeChild(t)}function s(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function p(t){return document.createElement(t)}function d(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function m(t){return document.createTextNode(t)}function f(){return m(" ")}function h(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function _(t,e){e=""+e,t.data!==e&&(t.data=e)}function $(t,e,n,o){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function w(t,e,n){t.classList[n?"add":"remove"](e)}let y;function v(t){y=t}function b(t){(function(){if(!y)throw new Error("Function called outside component initialization");return y})().$$.on_mount.push(t)}const x=[],T=[];let E=[];const k=[],M=Promise.resolve();let S=!1;function C(t){E.push(t)}const A=new Set;let D=0;function N(){if(0!==D)return;const t=y;do{try{for(;D<x.length;){const t=x[D];D++,v(t),O(t.$$)}}catch(t){throw x.length=0,D=0,t}for(v(null),x.length=0,D=0;T.length;)T.pop()();for(let t=0;t<E.length;t+=1){const e=E[t];A.has(e)||(A.add(e),e())}E.length=0}while(x.length);for(;k.length;)k.pop()();S=!1,A.clear(),v(t)}function O(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(C)}}const I=new Set;let H;function U(){H={r:0,c:[],p:H}}function F(){H.r||r(H.c),H=H.p}function L(t,e){t&&t.i&&(I.delete(t),t.i(e))}function P(t,e,n,o){if(t&&t.o){if(I.has(t))return;I.add(t),H.c.push(()=>{I.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}function j(t){t&&t.c()}function R(t,e,o,i){const{fragment:c,after_update:a}=t.$$;c&&c.m(e,o),i||C(()=>{const e=t.$$.on_mount.map(n).filter(l);t.$$.on_destroy?t.$$.on_destroy.push(...e):r(e),t.$$.on_mount=[]}),a.forEach(C)}function G(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];E.forEach(o=>-1===t.indexOf(o)?e.push(o):n.push(o)),n.forEach(t=>t()),E=e}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function B(t,e){-1===t.$$.dirty[0]&&(x.push(t),S||(S=!0,M.then(N)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function W(t,n,l,i,c,a,s,p=[-1]){const d=y;v(t);const m=t.$$={fragment:null,ctx:[],props:a,update:e,not_equal:c,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:o(),dirty:p,skip_bound:!1,root:n.target||d.$$.root};s&&s(m.root);let f=!1;if(m.ctx=l?l(t,n.props||{},(e,n,...o)=>{const r=o.length?o[0]:n;return m.ctx&&c(m.ctx[e],m.ctx[e]=r)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](r),f&&B(t,e)),n}):[],m.update(),f=!0,r(m.before_update),m.fragment=!!i&&i(m.ctx),n.target){if(n.hydrate){const t=(h=n.target,Array.from(h.childNodes));m.fragment&&m.fragment.l(t),t.forEach(u)}else m.fragment&&m.fragment.c();n.intro&&L(t.$$.fragment),R(t,n.target,n.anchor,n.customElement),N()}var h;v(d)}class X{$destroy(){G(this,1),this.$destroy=e}$on(t,n){if(!l(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var z={api_key:api_key,locations:{woolwich:{name:"woolwich",lat:51.491,lng:.0588},london:{name:"london",lat:51.513,lng:-.103},rio:{name:"rio",lat:-22.9137,lng:-43.7756},svalbard:{name:"svalbard",lat:78.6196,lng:16.8016},bangkok:{name:"bangkok",lat:13.7539,lng:100.5431},malltraeth:{name:"malltraeth",lat:53.1919,lng:-4.3941},hayonwye:{name:"hayonwye",lat:52.0738,lng:-3.1399},portmeirion:{name:"portmeirion",lat:52.9136,lng:-4.1167},cork:{name:"cork",lat:51.9,lng:-8.48},izmir:{name:"izmir",lat:38.47,lng:27.114}},available_locations:["woolwich","malltraeth"],ANIMATED_ICONS:!1,CACHE_LENGTH:12e5,USE_CACHE:!0,MAX_TEMP:45,MIN_TEMP:-10,TIME_TO_UNFOCUS_HOUR:5e3,click_file:"audio/tick.mp3",roundTemp:t=>Math.round(t),windSpeedAndDirection:(t,e)=>{let n=t/10;return` rotate(${e}deg) scale(${n=Math.min(Math.max(n,.5),1.2)})`},roundSpeed:t=>Math.round(t),timeToHour:t=>{if(t>0){const e=new Date(1e3*t),n={hour:"2-digit",hourCycle:"h24"};let o=new Intl.DateTimeFormat("en-US",n).format(e);return o=24==o?o="00":o}return""},timeToDayOfWeek:t=>{const e=new Date(1e3*t);return new Intl.DateTimeFormat("en-US",{weekday:"short"}).format(e)},timeToDate:t=>{const e=new Date(1e3*t);return new Intl.DateTimeFormat("en-US",{day:"2-digit"}).format(e)},map:(t,e,n,o,r)=>(t-e)*(r-o)/(n-e)+o,constrain:(t,e,n)=>Math.min(Math.max(t,e),n),doFetch:(t,e,n)=>(n&&(n=JSON.stringify(n)),fetch(t,{method:e,body:n}).then(t=>t.ok?t.json():t.json().then(t=>{throw t})))};function J(t){let e,n,o,r,l,i,s,d,h,w,y,v,b,x,T,E,k,M,S,C,A,D=z.timeToDayOfWeek(t[0].dt)+"",N=z.timeToDate(t[0].dt)+"",O=t[0].weather[0].main+"",I=z.roundSpeed(t[0].wind_speed)+"",H=t[0].time&&q(t);function U(t,e){return t[0].temp.min&&t[0].temp.max?Q:K}let F=U(t),L=F(t);return{c(){e=p("h3"),n=p("span"),o=m(D),r=f(),l=p("span"),i=m(N),s=f(),H&&H.c(),d=f(),h=p("div"),y=f(),v=p("div"),L.c(),b=f(),x=p("div"),T=m(O),E=f(),k=p("span"),M=p("span"),S=f(),C=m(I),(A=p("span")).textContent="kmh",g(n,"class","dayOfWeek"),g(l,"class","date"),g(h,"class",w="icon icon_"+t[0].weather[0].icon),g(v,"class","temperatures"),g(M,"class","icon icon_wind"),$(M,"transform",z.windSpeedAndDirection(t[0].wind_speed,t[0].wind_deg)),g(A,"class","wind_units"),g(k,"class","wind_speed"),g(x,"class","weather_description")},m(t,u){a(t,e,u),c(e,n),c(n,o),c(e,r),c(e,l),c(l,i),c(e,s),H&&H.m(e,null),a(t,d,u),a(t,h,u),a(t,y,u),a(t,v,u),L.m(v,null),a(t,b,u),a(t,x,u),c(x,T),c(x,E),c(x,k),c(k,M),c(k,S),c(k,C),c(k,A)},p(t,n){1&n&&D!==(D=z.timeToDayOfWeek(t[0].dt)+"")&&_(o,D),1&n&&N!==(N=z.timeToDate(t[0].dt)+"")&&_(i,N),t[0].time?H?H.p(t,n):((H=q(t)).c(),H.m(e,null)):H&&(H.d(1),H=null),1&n&&w!==(w="icon icon_"+t[0].weather[0].icon)&&g(h,"class",w),F===(F=U(t))&&L?L.p(t,n):(L.d(1),(L=F(t))&&(L.c(),L.m(v,null))),1&n&&O!==(O=t[0].weather[0].main+"")&&_(T,O),1&n&&$(M,"transform",z.windSpeedAndDirection(t[0].wind_speed,t[0].wind_deg)),1&n&&I!==(I=z.roundSpeed(t[0].wind_speed)+"")&&_(C,I)},d(t){t&&u(e),H&&H.d(),t&&u(d),t&&u(h),t&&u(y),t&&u(v),L.d(),t&&u(b),t&&u(x)}}}function q(t){let e,n,o,r=t[0].time+"";return{c(){e=p("span"),n=m(r),o=m(":00"),g(e,"class","hour_time")},m(t,r){a(t,e,r),c(e,n),c(e,o)},p(t,e){1&e&&r!==(r=t[0].time+"")&&_(n,r)},d(t){t&&u(e)}}}function K(t){let e,n,o,r,l,i,s=z.roundTemp(t[0].temp)+"";return{c(){e=p("div"),n=m(s),o=f(),(r=p("span")).textContent="°",l=f(),(i=p("span")).textContent="C",g(r,"class","degree_symbol"),g(i,"class","temperature_unit"),g(e,"class","high_temperature")},m(t,u){a(t,e,u),c(e,n),c(e,o),c(e,r),c(e,l),c(e,i)},p(t,e){1&e&&s!==(s=z.roundTemp(t[0].temp)+"")&&_(n,s)},d(t){t&&u(e)}}}function Q(t){let e,n,o,r,l,i,s,d,h,$,w,y,v,b=z.roundTemp(t[0].temp.max)+"",x=z.roundTemp(t[0].temp.min)+"";return{c(){e=p("div"),n=m(b),o=f(),(r=p("span")).textContent="°",l=f(),(i=p("span")).textContent="C",s=f(),d=p("div"),h=m(x),$=f(),(w=p("span")).textContent="°",y=f(),(v=p("span")).textContent="C",g(r,"class","degree_symbol"),g(i,"class","temperature_unit"),g(e,"class","high_temperature"),g(w,"class","degree_symbol"),g(v,"class","temperature_unit"),g(d,"class","low_temperature")},m(t,u){a(t,e,u),c(e,n),c(e,o),c(e,r),c(e,l),c(e,i),a(t,s,u),a(t,d,u),c(d,h),c(d,$),c(d,w),c(d,y),c(d,v)},p(t,e){1&e&&b!==(b=z.roundTemp(t[0].temp.max)+"")&&_(n,b),1&e&&x!==(x=z.roundTemp(t[0].temp.min)+"")&&_(h,x)},d(t){t&&u(e),t&&u(s),t&&u(d)}}}function V(t){let n,o=t[0].weather&&J(t);return{c(){n=p("div"),o&&o.c()},m(t,e){a(t,n,e),o&&o.m(n,null)},p(t,[e]){t[0].weather?o?o.p(t,e):((o=J(t)).c(),o.m(n,null)):o&&(o.d(1),o=null)},i:e,o:e,d(t){t&&u(n),o&&o.d()}}}function Y(t,e,n){let{period:o}=e;return b(()=>{}),t.$$set=(t=>{"period"in t&&n(0,o=t.period)}),[o]}class Z extends X{constructor(t){super(),W(this,t,Y,V,i,{period:0})}}function tt(t,e,n){const o=t.slice();return o[24]=e[n],o}function et(t,e,n){const o=t.slice();return o[27]=e[n],o[29]=n,o}function nt(t,e,n){const o=t.slice();return o[30]=e[n],o[32]=n,o}function ot(t,e,n){const o=t.slice();return o[33]=e[n],o}function rt(t,e,n){const o=t.slice();return o[36]=e[n],o[38]=n,o}function lt(t){let n;return{c(){g(n=p("div"),"class","loading")},m(t,e){a(t,n,e)},p:e,i:e,o:e,d(t){t&&u(n)}}}function it(t){let e,n,o,r,l,i=t[0],d=[];for(let e=0;e<i.length;e+=1)d[e]=$t(et(t,i,e));const m=t=>P(d[t],1,1,()=>{d[t]=null});let h=z.available_locations,_=[];for(let e=0;e<h.length;e+=1)_[e]=wt(tt(t,h,e));return{c(){e=p("section");for(let t=0;t<d.length;t+=1)d[t].c();n=f(),o=p("section"),r=p("div");for(let t=0;t<_.length;t+=1)_[t].c();g(e,"id","seven_days"),g(r,"class","button_group")},m(t,i){a(t,e,i);for(let t=0;t<d.length;t+=1)d[t]&&d[t].m(e,null);a(t,n,i),a(t,o,i),c(o,r);for(let t=0;t<_.length;t+=1)_[t]&&_[t].m(r,null);l=!0},p(t,n){if(109&n[0]){let o;for(i=t[0],o=0;o<i.length;o+=1){const r=et(t,i,o);d[o]?(d[o].p(r,n),L(d[o],1)):(d[o]=$t(r),d[o].c(),L(d[o],1),d[o].m(e,null))}for(U(),o=i.length;o<d.length;o+=1)m(o);F()}if(18&n[0]){let e;for(h=z.available_locations,e=0;e<h.length;e+=1){const o=tt(t,h,e);_[e]?_[e].p(o,n):(_[e]=wt(o),_[e].c(),_[e].m(r,null))}for(;e<_.length;e+=1)_[e].d(1);_.length=h.length}},i(t){if(!l){for(let t=0;t<i.length;t+=1)L(d[t]);l=!0}},o(t){d=d.filter(Boolean);for(let t=0;t<d.length;t+=1)P(d[t]);l=!1},d(t){t&&u(e),s(d,t),t&&u(n),t&&u(o),s(_,t)}}}function ct(t){let e,n;return e=new Z({props:{period:t[27]}}),{c(){j(e.$$.fragment)},m(t,o){R(e,t,o),n=!0},p(t,n){const o={};1&n[0]&&(o.period=t[27]),e.$set(o)},i(t){n||(L(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function at(t){let e,n;return e=new Z({props:{period:t[3]}}),{c(){j(e.$$.fragment)},m(t,o){R(e,t,o),n=!0},p(t,n){const o={};8&n[0]&&(o.period=t[3]),e.$set(o)},i(t){n||(L(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function ut(t){let e,n,o=t[27].temp_bar_chart,r=[];for(let e=0;e<o.length;e+=1)r[e]=pt(rt(t,o,e));return{c(){e=p("div"),n=p("ul");for(let t=0;t<r.length;t+=1)r[t].c();g(n,"class","temperature_bar_chart"),g(e,"class","rain_thing")},m(t,o){a(t,e,o),c(e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(n,null)},p(t,e){if(9&e[0]){let l;for(o=t[27].temp_bar_chart,l=0;l<o.length;l+=1){const i=rt(t,o,l);r[l]?r[l].p(i,e):(r[l]=pt(i),r[l].c(),r[l].m(n,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=o.length}},d(t){t&&u(e),s(r,t)}}}function st(t){let e,n,o=t[36].rt+"";return{c(){e=p("span"),n=m(o),g(e,"class","record_temp")},m(t,o){a(t,e,o),c(e,n)},p(t,e){1&e[0]&&o!==(o=t[36].rt+"")&&_(n,o)},d(t){t&&u(e)}}}function pt(t){let e,n,o,r=t[36].rt&&st(t);return{c(){e=p("li"),r&&r.c(),n=f(),g(e,"class","temp"),g(e,"title",o=`${t[36].value}°`),w(e,"focussed",t[36].hour===t[3]),$(e,"height",`${t[36].height}%`)},m(t,o){a(t,e,o),r&&r.m(e,null),c(e,n)},p(t,l){t[36].rt?r?r.p(t,l):((r=st(t)).c(),r.m(e,n)):r&&(r.d(1),r=null),1&l[0]&&o!==(o=`${t[36].value}°`)&&g(e,"title",o),9&l[0]&&w(e,"focussed",t[36].hour===t[3]),1&l[0]&&$(e,"height",`${t[36].height}%`)},d(t){t&&u(e),r&&r.d()}}}function dt(t){let e,n,o,l,i,m,f,_=t[27].temp_svg.polygons,$=[];for(let e=0;e<_.length;e+=1)$[e]=mt(ot(t,_,e));function w(...e){return t[9](t[27],...e)}function y(...e){return t[10](t[27],...e)}return{c(){e=p("div"),n=d("svg"),o=d("polyline");for(let t=0;t<$.length;t+=1)$[t].c();g(o,"points",l=t[27].temp_svg.polyline),g(n,"class","sun_line_chart"),g(n,"height",vt),g(n,"width","100"),g(n,"viewBox",i="0 0 100 "+vt),g(n,"preserveAspectRatio","none"),g(e,"class","rain_thing")},m(r,l){a(r,e,l),c(e,n),c(n,o);for(let t=0;t<$.length;t+=1)$[t]&&$[t].m(n,null);m||(f=[h(n,"mouseleave",t[8]),h(n,"mousemove",w),h(n,"touchmove",y)],m=!0)},p(e,r){if(t=e,1&r[0]&&l!==(l=t[27].temp_svg.polyline)&&g(o,"points",l),9&r[0]){let e;for(_=t[27].temp_svg.polygons,e=0;e<_.length;e+=1){const o=ot(t,_,e);$[e]?$[e].p(o,r):($[e]=mt(o),$[e].c(),$[e].m(n,null))}for(;e<$.length;e+=1)$[e].d(1);$.length=_.length}},d(t){t&&u(e),s($,t),m=!1,r(f)}}}function mt(t){let e,n;return{c(){g(e=d("polygon"),"points",n=t[33].points),w(e,"focussed",t[33].hour===t[3])},m(t,n){a(t,e,n)},p(t,o){1&o[0]&&n!==(n=t[33].points)&&g(e,"points",n),9&o[0]&&w(e,"focussed",t[33].hour===t[3])},d(t){t&&u(e)}}}function ft(t){let e,n,o;return{c(){e=p("div"),g(n=p("div"),"class","rain_inner"),$(n,"width",`${100*t[27].pop}%`),g(e,"class","rain_thing rain_probability"),g(e,"title",o=`${100*t[27].pop}%`)},m(t,o){a(t,e,o),c(e,n)},p(t,r){1&r[0]&&$(n,"width",`${100*t[27].pop}%`),1&r[0]&&o!==(o=`${100*t[27].pop}%`)&&g(e,"title",o)},d(t){t&&u(e)}}}function ht(t){let e,n,o=t[27].hours,r=[];for(let e=0;e<o.length;e+=1)r[e]=_t(nt(t,o,e));return{c(){e=p("div"),n=p("ul");for(let t=0;t<r.length;t+=1)r[t].c();g(n,"class","rain_chance_graph"),g(e,"class","rain_thing")},m(t,o){a(t,e,o),c(e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(n,null)},p(t,e){if(1&e[0]){let l;for(o=t[27].hours,l=0;l<o.length;l+=1){const i=nt(t,o,l);r[l]?r[l].p(i,e):(r[l]=_t(i),r[l].c(),r[l].m(n,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=o.length}},d(t){t&&u(e),s(r,t)}}}function gt(t){let e,n,o=z.timeToHour(t[30].dt)+"";return{c(){e=p("span"),n=m(o)},m(t,o){a(t,e,o),c(e,n)},p(t,e){1&e[0]&&o!==(o=z.timeToHour(t[30].dt)+"")&&_(n,o)},d(t){t&&u(e)}}}function _t(t){let e,n,o,r=t[32]%Math.ceil(t[27].hours.length/4)==0,l=r&&gt(t);return{c(){e=p("li"),l&&l.c(),n=f(),g(e,"title",o=`${100*t[30].pop}%`),$(e,"height",`${100*t[30].pop}%`)},m(t,o){a(t,e,o),l&&l.m(e,null),c(e,n)},p(t,i){1&i[0]&&(r=t[32]%Math.ceil(t[27].hours.length/4)==0),r?l?l.p(t,i):((l=gt(t)).c(),l.m(e,n)):l&&(l.d(1),l=null),1&i[0]&&o!==(o=`${100*t[30].pop}%`)&&g(e,"title",o),1&i[0]&&$(e,"height",`${100*t[30].pop}%`)},d(t){t&&u(e),l&&l.d()}}}function $t(t){let e,n,o=t[29]<7&&function(t){let e,n,o,r,l,i,s,d,m;const h=[at,ct],_=[];function $(t,e){return t[3]&&t[2]==t[27]?0:1}n=$(t),o=_[n]=h[n](t);let w=t[27].temp_bar_chart&&ut(t),y=t[27].temp_svg&&dt(t);function v(t,e){return t[27].hours.length>4?ht:ft}let b=v(t),x=b(t);return{c(){e=p("div"),o.c(),r=f(),w&&w.c(),l=f(),y&&y.c(),i=f(),x.c(),d=f(),g(e,"class",s="day weather_"+t[27].weather[0].icon)},m(t,o){a(t,e,o),_[n].m(e,null),c(e,r),w&&w.m(e,null),c(e,l),y&&y.m(e,null),c(e,i),x.m(e,null),a(t,d,o),m=!0},p(t,c){let a=n;(n=$(t))===a?_[n].p(t,c):(U(),P(_[a],1,1,()=>{_[a]=null}),F(),(o=_[n])?o.p(t,c):(o=_[n]=h[n](t)).c(),L(o,1),o.m(e,r)),t[27].temp_bar_chart?w?w.p(t,c):((w=ut(t)).c(),w.m(e,l)):w&&(w.d(1),w=null),t[27].temp_svg?y?y.p(t,c):((y=dt(t)).c(),y.m(e,i)):y&&(y.d(1),y=null),b===(b=v(t))&&x?x.p(t,c):(x.d(1),(x=b(t))&&(x.c(),x.m(e,null))),(!m||1&c[0]&&s!==(s="day weather_"+t[27].weather[0].icon))&&g(e,"class",s)},i(t){m||(L(o),m=!0)},o(t){P(o),m=!1},d(t){t&&u(e),_[n].d(),w&&w.d(),y&&y.d(),x.d(),t&&u(d)}}}(t);return{c(){o&&o.c(),e=m("")},m(t,r){o&&o.m(t,r),a(t,e,r),n=!0},p(t,e){t[29]<7&&o.p(t,e)},i(t){n||(L(o),n=!0)},o(t){P(o),n=!1},d(t){o&&o.d(t),t&&u(e)}}}function wt(t){let e,n,o,r,l=t[24]+"";function i(){return t[11](t[24])}return{c(){e=p("a"),n=m(l),g(e,"href","#location"),g(e,"class","button"),w(e,"primary",t[24]==t[1].name)},m(t,l){a(t,e,l),c(e,n),o||(r=h(e,"click",i),o=!0)},p(n,o){t=n,2&o[0]&&w(e,"primary",t[24]==t[1].name)},d(t){t&&u(e),o=!1,r()}}}function yt(t){let e,n,o,r,l,i,s,m,_,$,y,v;const b=[it,lt],x=[];function T(t,e){return t[0]?0:1}return o=T(t),r=x[o]=b[o](t),{c(){e=f(),n=p("div"),r.c(),l=f(),i=d("svg"),s=d("linearGradient"),m=d("stop"),_=d("stop"),g(m,"stop-color","#ddbf48"),g(m,"offset","0%"),g(_,"stop-color","#ddbf48"),g(_,"stop-opacity","0.1"),g(_,"offset","100%"),g(s,"id","Gradient1"),g(s,"x1","0"),g(s,"x2","0"),g(s,"y1","0"),g(s,"y2","1"),w(n,"animated",z.ANIMATED_ICONS)},m(r,u){a(r,e,u),a(r,n,u),x[o].m(n,null),c(n,l),c(n,i),c(i,s),c(s,m),c(s,_),$=!0,y||(v=h(document.body,"keyup",t[7]),y=!0)},p(t,e){let i=o;(o=T(t))===i?x[o].p(t,e):(U(),P(x[i],1,1,()=>{x[i]=null}),F(),(r=x[o])?r.p(t,e):(r=x[o]=b[o](t)).c(),L(r,1),r.m(n,l))},i(t){$||(L(r),$=!0)},o(t){P(r),$=!1},d(t){t&&u(e),t&&u(n),x[o].d(),y=!1,v()}}}const vt=70;function bt(t,e,n){let o,r,l,i,c;function a(t){n(1,r=z.locations[t]),localStorage.setItem("weather_last_location",t),function(){n(0,o=null);const t=localStorage.getItem(`weather_${r.name}`);if(t&&z.USE_CACHE){const e=JSON.parse(t);Date.now()-e.now>z.CACHE_LENGTH?s():(console.log("from cache"),u(e))}else s()}()}function u(t){let e=0;t.daily.forEach((n,o)=>{const r=z.timeToDate(n.dt),l=t.hourly.filter(t=>z.timeToDate(t.dt)===r),i=l[0];if((0==o||2==o)&&l.length<23)for(;l.length<23;){const t={dt:0,temp:!1,pop:0};0==o?l.unshift(t):2==o&&l.push(t)}l.forEach(t=>{t.time=z.timeToHour(t.dt),t.index=e,e++}),n.hours=l,n.temp_svg=function(t){const e=t.filter(t=>!1!==t.temp).map(t=>t.temp),n=Math.max(...e),o=Math.min(...e);let r,l,i=!1,c=!1,a=[],u=[],s=t.map(t=>t.temp),p=[];return s.forEach((e,d)=>{if(e){const m=Math.round(z.map(d+1,0,s.length,0,100)),f=Math.round(10*z.map(e,z.MIN_TEMP,z.MAX_TEMP,vt,0))/10;r||(r=Math.round(z.map(d,0,s.length,0,100)),l=f,a.push(`${r}, ${f}`)),a.push(`${m}, ${f}`),l&&p.push({points:`${r}, ${l},${m}, ${f},${m}, ${vt},${r}, ${vt} `,hour:t[d]}),r=m,l=f,e!==n||i?e!==o||c||(c=!0,u.push({text:`${z.roundTemp(e)}°`,x:r,y:f-6})):(i=!0,u.push({text:`${z.roundTemp(e)}°`,x:r,y:f-6}))}}),{polyline:a.join(","),polygons:p,texts:u}}(l),0==o&&m(n,i)}),n(0,o=t.daily)}function s(){console.log("fromapi");const t=`https://api.openweathermap.org/data/3.0/onecall?lat=${r.lat}&lon=${r.lng}&exclude=minutely&appid=${z.api_key}&units=metric`;z.doFetch(t,"GET",null).then(t=>{u(t),t.now=Date.now();const e=JSON.stringify(t);localStorage.setItem(`weather_${r.name}`,e)}).catch(t=>{console.log(t)})}function p(t,e){let n=t.target;for(;"svg"!==n.nodeName;)n=n.parentElement;const o=t.touches?t.touches[0].clientX:t.clientX;if(o){const t=n.getBoundingClientRect(),r=t.width,l=(o-t.left)/r,i=e.hours.length,c=Math.floor(l*i),a=e.hours[c];a&&a.temp&&m(e,e.hours[c])}}function d(){m(l,null)}function m(t,e){n(3,i=e),n(2,l=t),l&&(clearTimeout(c),c=setTimeout(()=>{d()},z.TIME_TO_UNFOCUS_HOUR))}b(()=>{a(function(){const t=localStorage.getItem("weather_last_location");return t&&""!=t&&null!=t?t:"woolwich"}())});return[o,r,l,i,a,p,d,function(t){if(("ArrowRight"==t.key||"ArrowLeft"==t.key)&&i){let e="ArrowRight"==t.key?1:-1;const n=i.index+e;let r=null,l=null;o.forEach(t=>{const e=t.hours.find(t=>t.index==n&&t.temp);e&&(l=t,r=e)}),r&&m(l,r)}},t=>d(),(t,e)=>p(e,t),(t,e)=>p(e,t),t=>a(t)]}const xt=document.querySelector("#svelte-weather");xt.innerHTML="";const Tt=new class extends X{constructor(t){super(),W(this,t,bt,yt,i,{},null,[-1,-1])}}({target:xt,props:{}});t("default",Tt)}}});
//# sourceMappingURL=weather.js.map
